"use strict";(self["webpackChunkweek8"]=self["webpackChunkweek8"]||[]).push([[94],{9280:function(t,e,a){a.d(e,{Z:function(){return g}});var n=a(6252),o=a(3577),s=a(9963);const i={"aria-label":"Page navigation example"},l={class:"pagination"},d=["onClick"];function p(t,e,a,p,u,c){return(0,n.wg)(),(0,n.iD)("nav",i,[(0,n._)("ul",l,[(0,n._)("li",{class:(0,o.C_)(["page-item",{disabled:!a.pages.has_pre}])},[(0,n._)("a",{class:"page-link",href:"#",onClick:e[0]||(e[0]=(0,s.iM)((e=>t.$emit("getProducts",a.pages.current_page-1)),["prevent"]))},"上一頁")],2),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.pages.total_pages,(e=>((0,n.wg)(),(0,n.iD)("li",{class:(0,o.C_)(["page-item",{active:e===a.pages.current_page}]),key:"page"+e},[(0,n._)("a",{class:"page-link",href:"#",onClick:(0,s.iM)((a=>t.$emit("getProducts",e)),["prevent"])},(0,o.zw)(e),9,d)],2)))),128)),(0,n._)("li",{class:(0,o.C_)(["page-item",{disabled:!a.pages.has_next}])},[(0,n._)("a",{class:"page-link",href:"#",onClick:e[1]||(e[1]=(0,s.iM)((e=>t.$emit("getProducts",a.pages.current_page+1)),["prevent"]))},"下一頁")],2)])])}var u={props:["pages"]},c=a(3744);const r=(0,c.Z)(u,[["render",p]]);var g=r},94:function(t,e,a){a.r(e),a.d(e,{default:function(){return G}});var n=a(6252),o=a(3577);const s=(0,n._)("h2",null,"後台-優惠券列表",-1),i={class:"container"},l={class:"text-end mt-4"},d=(0,n.Uk)(" 建立新的優惠券 "),p={class:"table mt-4"},u=(0,n._)("thead",null,[(0,n._)("tr",null,[(0,n._)("th",{width:"120"},"名稱"),(0,n._)("th",{width:"60"},"啟用"),(0,n._)("th",{width:"60"},"折扣"),(0,n._)("th",{width:"120"},"期限"),(0,n._)("th",{width:"120"},"優惠碼"),(0,n._)("th",{width:"120"},"編輯")])],-1),c={key:0},r={key:1},g={class:"btn-group"},h=(0,n.Uk)(" 編輯 "),_=["onClick"];function m(t,e,a,m,b,w){const v=(0,n.up)("Loading"),C=(0,n.up)("router-link"),k=(0,n.up)("pagination"),f=(0,n.up)("deleteCoupon");return(0,n.wg)(),(0,n.iD)(n.HY,null,[s,(0,n.Wm)(v,{active:b.isLoading,"z-index":1060},null,8,["active"]),(0,n._)("div",i,[(0,n._)("div",l,[(0,n.Wm)(C,{class:"btn btn-primary",to:"/admin/coupon"},{default:(0,n.w5)((()=>[d])),_:1})]),(0,n._)("table",p,[u,(0,n._)("tbody",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(b.coupons,(t=>((0,n.wg)(),(0,n.iD)("tr",{key:t.id},[(0,n._)("td",null,(0,o.zw)(t.title),1),(0,n._)("td",null,[1===t.is_enabled?((0,n.wg)(),(0,n.iD)("span",c,"啟用中")):((0,n.wg)(),(0,n.iD)("span",r,"未啟用"))]),(0,n._)("td",null,(0,o.zw)(t.percent),1),(0,n._)("td",null,(0,o.zw)(new Date(1e3*t.due_date).toLocaleDateString()),1),(0,n._)("td",null,(0,o.zw)(t.code),1),(0,n._)("td",null,[(0,n._)("div",g,[(0,n.Wm)(C,{to:`/admin/coupon/${t.id}`,class:"btn btn-outline-primary btn-sm"},{default:(0,n.w5)((()=>[h])),_:2},1032,["to"]),(0,n._)("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:e=>w.OpenDeleteCouponModal(t)}," 刪除 ",8,_)])])])))),128))])]),(0,n.Wm)(k,{pages:b.pagination,onGetProducts:w.getCoupons},null,8,["pages","onGetProducts"])]),(0,n.Wm)(f,{coupon:b.coupon,ref:"delCouponModal",onUpdate:e[0]||(e[0]=t=>w.getCoupons(b.pagination.current_page))},null,8,["coupon"])],64)}var b=a(9280);const w={id:"delCouponModal",ref:"modal",class:"modal fade",tabindex:"-1","aria-labelledby":"delProductModalLabel","aria-hidden":"true"},v={class:"modal-dialog"},C={class:"modal-content border-0"},k=(0,n._)("div",{class:"modal-header bg-danger text-white"},[(0,n._)("h5",{id:"delCouponModal",class:"modal-title"},[(0,n._)("span",null,"刪除優惠券")]),(0,n._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),f={class:"modal-body"},y={class:"text-center"},M=(0,n._)("strong",{class:"text-danger"},"(刪除優惠券後將無法恢復)。",-1),D={class:"modal-footer"},$=(0,n._)("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function x(t,e,a,s,i,l){return(0,n.wg)(),(0,n.iD)("div",w,[(0,n._)("div",v,[(0,n._)("div",C,[k,(0,n._)("div",f,[(0,n._)("p",y,[(0,n.Uk)(" 確定刪除"+(0,o.zw)(a.coupon.title)+"？ ",1),M])]),(0,n._)("div",D,[$,(0,n._)("button",{type:"button",class:"btn btn-danger",onClick:e[0]||(e[0]=(...t)=>l.deleteCoupon&&l.deleteCoupon(...t))}," 確認刪除 ")])])])],512)}var L=a(7424),z=a.n(L),P={data(){return{modal:""}},props:["coupon"],methods:{deleteCoupon(){this.$http.delete(`https://vue3-course-api.hexschool.io/v2/api/otispath/admin/coupon/${this.coupon.id}`).then((t=>{alert(t.data.message),this.hideModal(),this.$emit("update")})).catch((t=>{alert(t.message)}))},openModal(){this.modal.show()},hideModal(){this.modal.hide()}},mounted(){this.modal=new(z())(this.$refs.modal,{keyboard:!1,backdrop:"static"})}},W=a(3744);const Z=(0,W.Z)(P,[["render",x]]);var U=Z,H={components:{pagination:b.Z,deleteCoupon:U},data(){return{isLoading:!1,pagination:{},isNew:!1,coupons:[],coupon:{}}},methods:{getCoupons(t=1){this.isLoading=!0,this.$http.get(`https://vue3-course-api.hexschool.io/v2/api/otispath/admin/coupons/?page=${t}`).then((t=>{this.coupons=t.data.coupons,this.pagination=t.data.pagination,this.isLoading=!1})).catch((()=>{this.isLoading=!1,alert("無法取得優惠券列表")}))},OpenDeleteCouponModal(t){this.coupon=t,this.$refs.delCouponModal.openModal()}},mounted(){this.getCoupons()}};const Y=(0,W.Z)(H,[["render",m]]);var G=Y}}]);
//# sourceMappingURL=94.a0426ee4.js.map