"use strict";(self["webpackChunkweek8"]=self["webpackChunkweek8"]||[]).push([[290],{6290:function(e,t,s){s.r(t),s.d(t,{default:function(){return V}});var r=s(6252),a=s(3577),o=s(9963);const n={class:"container mt-80"},l={class:"row justify-content-center flex-md-row flex-column"},d={class:"col-md-5 col-12 mt-5"},c=(0,r._)("h4",{class:"text-center text-secondary fw-bolder"},"訂單編號",-1),i={class:"text-center text-secondary"},p=(0,r._)("h4",{class:"text-center mt-4 text-secondary fw-bolder"},"訂單內容",-1),m={class:"table"},u=(0,r._)("thead",{class:"text-secondary"},[(0,r._)("tr",null,[(0,r._)("th",null,"品名"),(0,r._)("th",null,"數量"),(0,r._)("th",null,"售價")])],-1),h={class:"text-secondary"},y={class:"d-flex"},_={class:"pt-1 m-0"},b={class:"text-secondary"},f=(0,r._)("td",{colspan:"2",class:"text-end"},"訂單金額",-1),w={class:"text-end"},k={class:"col-md-4 col-12 mt-5"},g=(0,r._)("h4",{class:"text-center text-secondary fw-bolder mb-4"},"支付方式",-1),x={class:"d-flex flex-column px-lg-6 px-md-4 px-sm-6"},v=(0,r._)("label",{class:"form-check-label ms-3",for:"creditCard"}," 信用卡付款 ",-1),L=(0,r._)("label",{class:"form-check-label ms-3",for:"transfer"}," 銀行轉帳 ",-1),C=(0,r._)("label",{class:"form-check-label ms-3",for:"cashOnDelivery"}," 貨到付款 ",-1),D=["disabled"],$={key:0,class:"spinner-border spinner-border-sm me-2",role:"status"},z={key:1},q={key:2};function O(e,t,s,O,U,G){const P=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)("div",n,[(0,r._)("div",l,[(0,r._)("div",d,[c,(0,r._)("p",i,(0,a.zw)(U.order.id),1),p,(0,r._)("table",m,[u,(0,r._)("tbody",h,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(U.order.products,(e=>((0,r.wg)(),(0,r.iD)("tr",{key:e},[(0,r._)("td",null,[(0,r.Wm)(P,{to:`/product/${e.product.id}`,class:"mb-0"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,a.zw)(e.product.title),1)])),_:2},1032,["to"])]),(0,r._)("td",null,[(0,r._)("div",y,[(0,r._)("p",_,(0,a.zw)(e.qty)+(0,a.zw)(e.product.unit),1)])]),(0,r._)("td",null,(0,a.zw)(e.total),1)])))),128))]),(0,r._)("tfoot",b,[(0,r._)("tr",null,[f,(0,r._)("td",w,(0,a.zw)(U.order.total),1)])])])]),(0,r._)("div",k,[g,(0,r._)("div",x,[(0,r._)("div",{class:(0,a.C_)(["form-check border-secondary border mb-2 py-2",{"bg-info":"信用卡付款"===U.payment}])},[(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>U.payment=e),value:"信用卡付款",class:"form-check-input ms-2",type:"radio",name:"payment",id:"creditCard"},null,512),[[o.G2,U.payment]]),v],2),(0,r._)("div",{class:(0,a.C_)(["form-check border-secondary border mb-2 py-2",{"bg-info":"銀行轉帳"===U.payment}])},[(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>U.payment=e),value:"銀行轉帳",class:"form-check-input ms-2",type:"radio",name:"payment",id:"transfer"},null,512),[[o.G2,U.payment]]),L],2),(0,r._)("div",{class:(0,a.C_)(["form-check border-secondary border mb-2 py-2",{"bg-info":"貨到付款"===U.payment}])},[(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>U.payment=e),value:"貨到付款",class:"form-check-input ms-2",type:"radio",name:"payment",id:"cashOnDelivery"},null,512),[[o.G2,U.payment]]),C],2),(0,r._)("button",{class:"btn btn-primary mt-3",type:"button",disabled:""===U.payment||!0===U.isLoading,onClick:t[3]||(t[3]=(...e)=>G.orderPay&&G.orderPay(...e))},[!0===U.isLoading?((0,r.wg)(),(0,r.iD)("span",$)):(0,r.kq)("",!0),U.payment?((0,r.wg)(),(0,r.iD)("span",z,"確定支付")):(0,r.kq)("",!0),U.payment?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("span",q,"請選擇支付方式"))],8,D)])])])])}var U={data(){return{orders:[],order:{},payment:"",isLoading:!1}},methods:{getOrder(){this.isLoading=!0;const{id:e}=this.$route.params;sessionStorage.setItem("orderId",e),this.$http.get("https://vue3-course-api.hexschool.io/v2/api/otispath/orders").then((t=>{this.orders=t.data.orders,this.order=this.orders.filter((t=>t.id===e)),this.order=this.order[0],this.isLoading=!1})).catch((e=>{alert(e),this.isLoading=!1}))},orderPay(){this.isLoading=!0;const{id:e}=this.$route.params;this.$http.post(`https://vue3-course-api.hexschool.io/v2/api/otispath/pay/${e}`).then((e=>{this.isLoading=!1,this.$router.push("/success")})).catch((e=>{alert(e),this.isLoading=!1}))}},mounted(){window.scroll(0,0),this.getOrder()}},G=s(3744);const P=(0,G.Z)(U,[["render",O]]);var V=P}}]);
//# sourceMappingURL=290.6737b2bc.js.map