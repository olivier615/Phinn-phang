"use strict";(self["webpackChunkweek8"]=self["webpackChunkweek8"]||[]).push([[772],{9280:function(e,a,t){t.d(a,{Z:function(){return g}});var s=t(6252),l=t(3577),n=t(9963);const d={"aria-label":"Page navigation example"},r={class:"pagination"},i=["onClick"];function o(e,a,t,o,p,u){return(0,s.wg)(),(0,s.iD)("nav",d,[(0,s._)("ul",r,[(0,s._)("li",{class:(0,l.C_)(["page-item",{disabled:!t.pages.has_pre}])},[(0,s._)("a",{class:"page-link",href:"#",onClick:a[0]||(a[0]=(0,n.iM)((a=>e.$emit("getProducts",t.pages.current_page-1)),["prevent"]))},"上一頁")],2),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.pages.total_pages,(a=>((0,s.wg)(),(0,s.iD)("li",{class:(0,l.C_)(["page-item",{active:a===t.pages.current_page}]),key:"page"+a},[(0,s._)("a",{class:"page-link",href:"#",onClick:(0,n.iM)((t=>e.$emit("getProducts",a)),["prevent"])},(0,l.zw)(a),9,i)],2)))),128)),(0,s._)("li",{class:(0,l.C_)(["page-item",{disabled:!t.pages.has_next}])},[(0,s._)("a",{class:"page-link",href:"#",onClick:a[1]||(a[1]=(0,n.iM)((a=>e.$emit("getProducts",t.pages.current_page+1)),["prevent"]))},"下一頁")],2)])])}var p={props:["pages"]},u=t(3744);const c=(0,u.Z)(p,[["render",o]]);var g=c},1772:function(e,a,t){t.r(a),t.d(a,{default:function(){return G}});var s=t(6252),l=t(3577);const n=(0,s._)("h2",null,"後台-訂單列表",-1),d={class:"container"},r={class:"table mt-4"},i=(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",null,"訂單編號"),(0,s._)("th",null,"訂購者"),(0,s._)("th",null,"金額"),(0,s._)("th",null,"支付狀態"),(0,s._)("th",null,"編輯")])],-1),o={key:0,class:"badge bg-primary"},p={key:1,class:"badge bg-dark"},u={class:"btn-group"},c=(0,s.Uk)(" 編輯訂單 "),g=["onClick"];function h(e,a,t,h,_,m){const b=(0,s.up)("Loading"),v=(0,s.up)("router-link"),k=(0,s.up)("pagination"),w=(0,s.up)("deleteOrder");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(b,{active:_.isLoading,"z-index":1060},null,8,["active"]),n,(0,s._)("div",d,[(0,s._)("table",r,[i,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(_.orders,(e=>((0,s.wg)(),(0,s.iD)("tr",{key:e.id},[(0,s._)("td",null,(0,l.zw)(e.id),1),(0,s._)("td",null,(0,l.zw)(e.user.name),1),(0,s._)("td",null,(0,l.zw)(e.total),1),(0,s._)("td",null,[e.is_paid?((0,s.wg)(),(0,s.iD)("span",o,"已支付")):((0,s.wg)(),(0,s.iD)("span",p,"未付款"))]),(0,s._)("td",null,[(0,s._)("div",u,[(0,s.Wm)(v,{class:"btn btn-outline-primary btn-sm",to:`/admin/order/${e.id}`},{default:(0,s.w5)((()=>[c])),_:2},1032,["to"]),(0,s._)("button",{class:"btn btn-danger btn-sm",onClick:a=>m.OpenDeleteOrderModal(e)}," 刪除 ",8,g)])])])))),128))])]),(0,s.Wm)(k,{pages:_.pagination,onGetProducts:m.getOrders},null,8,["pages","onGetProducts"]),(0,s.Wm)(w,{order:_.order,ref:"delOrderModal",onUpdate:a[0]||(a[0]=e=>m.getOrders(_.pagination.current_page))},null,8,["order"])])],64)}var _=t(9280);const m={id:"delOrderModal",ref:"modal",class:"modal fade",tabindex:"-1","aria-labelledby":"delProductModalLabel","aria-hidden":"true"},b={class:"modal-dialog"},v={class:"modal-content border-0"},k=(0,s._)("div",{class:"modal-header bg-danger text-white"},[(0,s._)("h5",{id:"delOrderModalLabel",class:"modal-title"},[(0,s._)("span",null,"刪除訂單")]),(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),w={class:"modal-body"},f=(0,s._)("span",null,"支付狀態：",-1),y={key:0,class:"badge bg-primary"},O={key:1,class:"badge bg-dark"},M=(0,s._)("p",{class:"text-center"},[(0,s._)("strong",{class:"text-danger"},"(訂單刪除後將無法恢復)。")],-1),C={class:"modal-footer"},D=(0,s._)("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function $(e,a,t,n,d,r){return(0,s.wg)(),(0,s.iD)("div",m,[(0,s._)("div",b,[(0,s._)("div",v,[k,(0,s._)("div",w,[(0,s._)("p",null,"訂單編號："+(0,l.zw)(t.order.id),1),(0,s._)("p",null,"訂購者："+(0,l.zw)(t.order.user.name),1),(0,s._)("div",null,[f,t.order.is_paid?((0,s.wg)(),(0,s.iD)("span",y,"已支付")):((0,s.wg)(),(0,s.iD)("span",O,"未付款"))]),M]),(0,s._)("div",C,[D,(0,s._)("button",{type:"button",class:"btn btn-danger",onClick:a[0]||(a[0]=(...e)=>r.deleteOrder&&r.deleteOrder(...e))}," 確認刪除 ")])])])],512)}var x=t(7424),L=t.n(x),z={data(){return{modal:""}},props:["order"],methods:{deleteOrder(){this.$http.delete(`https://vue3-course-api.hexschool.io/v2/api/otispath/admin/order/${this.order.id}`).then((e=>{alert(e.data.message),this.hideModal(),this.$emit("update")})).catch((e=>{alert(e.message)}))},openModal(){this.modal.show()},hideModal(){this.modal.hide()}},mounted(){this.modal=new(L())(this.$refs.modal,{keyboard:!1,backdrop:"static"})}},P=t(3744);const Z=(0,P.Z)(z,[["render",$]]);var W=Z,H={components:{pagination:_.Z,deleteOrder:W},data(){return{isLoading:!1,orders:[],pagination:{},order:{user:{name:"",email:"",tel:"",address:""},message:""}}},methods:{getOrders(e=1){this.isLoading=!0,this.$http.get(`https://vue3-course-api.hexschool.io/v2/api/otispath/admin/orders/?page=${e}`).then((e=>{this.orders=e.data.orders,this.pagination=e.data.pagination,this.isLoading=!1})).catch(this.isLoading=!1)},OpenDeleteOrderModal(e){this.order=e,this.$refs.delOrderModal.openModal()}},mounted(){this.getOrders()}};const Y=(0,P.Z)(H,[["render",h]]);var G=Y}}]);
//# sourceMappingURL=772.fbd8f6c6.js.map