{"version":3,"file":"js/166.4853f623.js","mappings":"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","sources":["webpack://week8/./src/components/PageView.vue","webpack://week8/./src/components/PageView.vue?6380","webpack://week8/./src/views/Admin/AdminProducts.vue","webpack://week8/./src/components/DeleteProduct.vue","webpack://week8/./src/components/DeleteProduct.vue?889f","webpack://week8/./src/views/Admin/AdminProducts.vue?96d5"],"sourcesContent":["<template>\r\n  <nav aria-label=\"Page navigation example\">\r\n    <ul class=\"pagination\">\r\n      <li class=\"page-item\" :class=\"{ disabled: !pages.has_pre }\">\r\n        <a\r\n          class=\"page-link\"\r\n          href=\"#\"\r\n          @click.prevent=\"$emit('getProducts', pages.current_page - 1)\"\r\n          >上一頁</a\r\n        >\r\n      </li>\r\n      <li\r\n        class=\"page-item\"\r\n        v-for=\"page in pages.total_pages\"\r\n        :key=\"'page' + page\"\r\n        :class=\"{active: page === pages.current_page}\"\r\n      >\r\n        <a class=\"page-link\" href=\"#\" @click.prevent=\"$emit('getProducts', page)\">\r\n          {{page}}\r\n        </a>\r\n      </li>\r\n      <li class=\"page-item\" :class=\"{ disabled: !pages.has_next }\">\r\n        <a\r\n          class=\"page-link\"\r\n          href=\"#\"\r\n          @click.prevent=\"$emit('getProducts', pages.current_page + 1)\"\r\n          >下一頁</a\r\n        >\r\n      </li>\r\n    </ul>\r\n  </nav>\r\n</template>\r\n<script>\r\nexport default {\r\n  props: ['pages']\r\n}\r\n</script>\r\n","import { render } from \"./PageView.vue?vue&type=template&id=5d03949f\"\nimport script from \"./PageView.vue?vue&type=script&lang=js\"\nexport * from \"./PageView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\User\\\\Desktop\\\\vue-week8\\\\week8\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <div class=\"container\">\r\n    <Loading :active=\"isLoading\" :z-index=\"1060\" />\r\n    <h2>後台-產品列表</h2>\r\n    <div class=\"text-end mt-4\">\r\n      <button class=\"btn btn-primary\" @click=\"openProductPage('new')\">\r\n        建立新的產品\r\n      </button>\r\n    </div>\r\n    <table class=\"table mt-4\">\r\n      <thead>\r\n        <tr>\r\n          <th width=\"120\">分類</th>\r\n          <th>產品名稱</th>\r\n          <th width=\"120\">促銷方式</th>\r\n          <th width=\"60\">原價</th>\r\n          <th width=\"60\">售價</th>\r\n          <th width=\"100\">是否啟用</th>\r\n          <th width=\"120\">編輯</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <tr v-for=\"item in products\" :key=\"item.id\">\r\n          <td>{{ item.category }}</td>\r\n          <td>{{ item.title }}</td>\r\n          <td>\r\n            <div class=\"d-flex\">\r\n              <span\r\n                v-for=\"tag in item.promotion\"\r\n                :key=\"tag+item.title\"\r\n                :class=\"{\r\n                  'bg-primary': tag === '新品',\r\n                  'bg-danger': tag === '熱門',\r\n                  'bg-success': tag === '特價',\r\n                }\"\r\n                class=\"badge rounded-pill me-1\"\r\n                >{{ tag }}</span\r\n              >\r\n            </div>\r\n          </td>\r\n          <td class=\"text-end\">{{ item.origin_price }}</td>\r\n          <td class=\"text-end\">{{ item.price }}</td>\r\n          <td>\r\n            <span v-if=\"item.is_enabled\" class=\"text-success\">啟用</span>\r\n            <span v-else>未啟用</span>\r\n          </td>\r\n          <td>\r\n            <div class=\"btn-group\">\r\n              <router-link :to=\"`/admin/product/${item.id}`\"\r\n              class=\"btn btn-outline-primary btn-sm\">\r\n                編輯\r\n              </router-link>\r\n              <button\r\n                type=\"button\"\r\n                class=\"btn btn-outline-danger btn-sm\"\r\n                @click=\"OpenDeleteProductModal(item)\"\r\n              >\r\n                刪除\r\n              </button>\r\n            </div>\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n    <!-- 分頁元件 -->\r\n    <pagination :pages=\"pagination\" @get-products=\"getProducts\" />\r\n  </div>\r\n  <deleteProduct :edit-product=\"editProduct\"\r\n  ref=\"delProductModal\"\r\n  @update=\"getProducts(pagination.current_page)\" />\r\n</template>\r\n\r\n<script>\r\nimport pagination from '@/components/PageView.vue'\r\nimport deleteProduct from '@/components/DeleteProduct.vue'\r\nexport default {\r\n  components: {\r\n    pagination,\r\n    deleteProduct\r\n  },\r\n  data () {\r\n    return {\r\n      isLoading: false,\r\n      url: process.env.VUE_APP_API,\r\n      path: process.env.VUE_APP_PATH,\r\n      products: [],\r\n      editProduct: {\r\n        imagesUrl: [],\r\n        promotion: []\r\n      },\r\n      isNew: false,\r\n      pagination: {}\r\n    }\r\n  },\r\n  methods: {\r\n    getProducts (page = 1) {\r\n      this.isLoading = true\r\n      this.$http.get(`${this.url}/api/${this.path}/admin/products/?page=${page}`)\r\n        .then(res => {\r\n          this.products = res.data.products\r\n          this.pagination = res.data.pagination\r\n          this.isLoading = false\r\n        })\r\n        .catch(() => {\r\n          this.isLoading = false\r\n          alert('無法取得產品列表')\r\n        })\r\n    },\r\n    openProductPage (isNew, item) {\r\n      // 參數 isNew 是 根據 @click=\"fn()\" 所帶的字串\r\n      if (isNew === 'new') {\r\n        this.editProduct = {\r\n          imagesUrl: [],\r\n          promotion: []\r\n        } // 清空 editProduct 資料\r\n        this.isNew = true // 新資料\r\n        // productModal.show();\r\n        this.$router.push('/admin/product')\r\n      } else if (isNew === 'edit') {\r\n        this.editProduct = {\r\n          imagesUrl: [],\r\n          promotion: []\r\n        }\r\n        this.editProduct = {\r\n          ...item\r\n        }\r\n        // 參數 item 是 <tr v-for...> 的 item (product)\r\n        this.isNew = false // 舊資料\r\n        // productModal.show();\r\n        this.$router.push('/product/:id')\r\n      }\r\n    },\r\n    OpenDeleteProductModal (item) {\r\n      this.editProduct = {\r\n        ...item\r\n      }\r\n      this.$refs.delProductModal.openModal()\r\n    }\r\n  },\r\n  mounted () {\r\n    this.getProducts()\r\n  }\r\n}\r\n</script>\r\n","<template>\r\n  <div\r\n    id=\"delProductModal\"\r\n    ref=\"modal\"\r\n    class=\"modal fade\"\r\n    tabindex=\"-1\"\r\n    aria-labelledby=\"delProductModalLabel\"\r\n    aria-hidden=\"true\"\r\n  >\r\n    <div class=\"modal-dialog\">\r\n      <div class=\"modal-content border-0\">\r\n        <div class=\"modal-header bg-danger text-white\">\r\n          <h5 id=\"delProductModalLabel\" class=\"modal-title\">\r\n            <span>刪除產品</span>\r\n          </h5>\r\n          <button\r\n            type=\"button\"\r\n            class=\"btn-close\"\r\n            data-bs-dismiss=\"modal\"\r\n            aria-label=\"Close\"\r\n          ></button>\r\n        </div>\r\n        <div class=\"modal-body\">\r\n          是否刪除\r\n          <strong class=\"text-danger\">{{ editProduct.title }}</strong>\r\n          (商品刪除後將無法恢復)。\r\n        </div>\r\n        <div class=\"modal-footer\">\r\n          <button\r\n            type=\"button\"\r\n            class=\"btn btn-outline-secondary\"\r\n            data-bs-dismiss=\"modal\"\r\n          >\r\n            取消\r\n          </button>\r\n          <button type=\"button\" class=\"btn btn-danger\" @click=\"deleteProduct\">\r\n            確認刪除\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Modal from 'bootstrap/js/dist/modal'\r\nexport default {\r\n  data () {\r\n    return {\r\n      modal: ''\r\n    }\r\n  },\r\n  props: ['editProduct'],\r\n  methods: {\r\n    deleteProduct () {\r\n      this.$http.delete(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/admin/product/${this.editProduct.id}`)\r\n        .then(res => {\r\n          alert(res.data.message)\r\n          this.hideModal()\r\n          this.$emit('update')\r\n        })\r\n        .catch(err => {\r\n          alert(err.data.message)\r\n        })\r\n    },\r\n    openModal () {\r\n      this.modal.show()\r\n    },\r\n    hideModal () {\r\n      this.modal.hide()\r\n    }\r\n  },\r\n  mounted () {\r\n    this.modal = new Modal(this.$refs.modal, {\r\n      keyboard: false,\r\n      backdrop: 'static'\r\n    })\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./DeleteProduct.vue?vue&type=template&id=0045f027\"\nimport script from \"./DeleteProduct.vue?vue&type=script&lang=js\"\nexport * from \"./DeleteProduct.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\User\\\\Desktop\\\\vue-week8\\\\week8\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./AdminProducts.vue?vue&type=template&id=8f3b6d5c\"\nimport script from \"./AdminProducts.vue?vue&type=script&lang=js\"\nexport * from \"./AdminProducts.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\User\\\\Desktop\\\\vue-week8\\\\week8\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementBlock","_createElementVNode","disabled","$props","has_pre","href","onClick","_ctx","current_page","_Fragment","_renderList","total_pages","page","active","key","_hoisted_3","has_next","props","__exports__","render","width","_createVNode","_component_Loading","$data","_hoisted_2","$options","_hoisted_5","item","id","_toDisplayString","category","title","promotion","tag","origin_price","price","is_enabled","_hoisted_10","_component_router_link","to","type","_hoisted_13","_component_pagination","pages","onGetProducts","_component_deleteProduct","ref","onUpdate","tabindex","_hoisted_4","data","modal","methods","deleteProduct","this","$http","delete","editProduct","then","res","alert","message","hideModal","$emit","catch","err","openModal","show","hide","mounted","Modal","$refs","keyboard","backdrop","components","pagination","isLoading","url","process","path","products","imagesUrl","isNew","getProducts","get","openProductPage","$router","push","OpenDeleteProductModal","delProductModal"],"sourceRoot":""}