"use strict";(self["webpackChunkweek8"]=self["webpackChunkweek8"]||[]).push([[180],{9280:function(t,e,s){s.d(e,{Z:function(){return g}});var a=s(6252),i=s(3577),o=s(9963);const l={"aria-label":"Page navigation example"},n={class:"pagination"},c=["onClick"];function r(t,e,s,r,d,p){return(0,a.wg)(),(0,a.iD)("nav",l,[(0,a._)("ul",n,[(0,a._)("li",{class:(0,i.C_)(["page-item",{disabled:!s.pages.has_pre}])},[(0,a._)("a",{class:"page-link",href:"#",onClick:e[0]||(e[0]=(0,o.iM)((e=>t.$emit("getProducts",s.pages.current_page-1)),["prevent"]))},"上一頁")],2),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.pages.total_pages,(e=>((0,a.wg)(),(0,a.iD)("li",{class:(0,i.C_)(["page-item",{active:e===s.pages.current_page}]),key:"page"+e},[(0,a._)("a",{class:"page-link",href:"#",onClick:(0,o.iM)((s=>t.$emit("getProducts",e)),["prevent"])},(0,i.zw)(e),9,c)],2)))),128)),(0,a._)("li",{class:(0,i.C_)(["page-item",{disabled:!s.pages.has_next}])},[(0,a._)("a",{class:"page-link",href:"#",onClick:e[1]||(e[1]=(0,o.iM)((e=>t.$emit("getProducts",s.pages.current_page+1)),["prevent"]))},"下一頁")],2)])])}var d={props:["pages"]},p=s(3744);const u=(0,p.Z)(d,[["render",r]]);var g=u},7180:function(t,e,s){s.r(e),s.d(e,{default:function(){return K}});var a=s(6252),i=s(9963),o=s(3577);const l=(0,a._)("div",{class:"img-banner-ProductsView mt-80 img-banner mb-6"},null,-1),n={class:"container"},c={class:"row flex-column flex-md-row"},r={class:"list-style-none col-12 col-md-3 d-flex flex-column align-items-center text-secondary"},d={class:"mb-2"},p=["onClick"],u={class:"card-group col-12 col-md-9"},g={class:"row row-cols-lg-3 row-cols-sm-2 row-cols-1"},h={class:"card border-0"},m=["src","alt"],v={class:"card-body py-2 px-0"},_={class:"card-title mb-0 text-secondary fs-6"},f={class:"card-footer p-0 border-0"},b=(0,a.Uk)("查看更多"),w={class:"d-flex justify-content-between mt-1"},y={class:"d-flex border border-secondary align-items-center"},k=["onClick"],x=["onClick"],C=["onClick","disabled"],P={key:0},$=(0,a._)("span",{class:"spinner-border spinner-border-sm me-2",role:"status"},null,-1),D=(0,a._)("span",null,"請稍後...",-1),Z=[$,D],T={key:1},L={class:"d-flex justify-content-md-end justify-content-center my-4"};function M(t,e,s,$,D,M){const N=(0,a.up)("router-link"),H=(0,a.up)("pagination");return(0,a.wg)(),(0,a.iD)(a.HY,null,[l,(0,a._)("div",n,[(0,a._)("div",c,[(0,a._)("ul",r,[(0,a._)("li",d,[(0,a._)("a",{href:"#",onClick:e[0]||(e[0]=(0,i.iM)(((...t)=>M.getProducts&&M.getProducts(...t)),["prevent"]))}," 全部商品 ")]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(D.productsType,(t=>((0,a.wg)(),(0,a.iD)("li",{class:"mb-2",key:t},[(0,a._)("a",{href:"#",onClick:(0,i.iM)((e=>M.getProductsType(t)),["prevent"])},(0,o.zw)(t),9,p)])))),128))]),(0,a._)("div",u,[(0,a._)("div",g,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(D.products,(e=>((0,a.wg)(),(0,a.iD)("div",{class:"col mb-3 py-2",key:e.id},[(0,a._)("div",h,[(0,a.Wm)(N,{to:`/product/${e.id}`},{default:(0,a.w5)((()=>[(0,a._)("img",{src:e.imageUrl,class:"card-img-top",alt:e.title},null,8,m),(0,a._)("div",v,[(0,a._)("h5",_,(0,o.zw)(e.title),1)])])),_:2},1032,["to"]),(0,a._)("div",f,[(0,a.Wm)(N,{class:"btn btn-outline-secondary",to:`/product/${e.id}`,style:{width:"100%"}},{default:(0,a.w5)((()=>[b])),_:2},1032,["to"]),(0,a._)("div",w,[(0,a._)("div",y,[(0,a._)("span",{class:"bi bi-dash fs-5 px-1",onClick:t=>M.minusNum(e)},null,8,k),(0,a._)("input",{type:"number",class:"form-control p-0 text-center border-0 bg-light",value:"1",ref_for:!0,ref:`item${e.id}`,min:"1",style:{"max-width":"2rem",height:"100%"}},null,512),(0,a._)("span",{class:"bi bi-plus fs-5 px-1",onClick:t=>M.addNum(e)},null,8,x)]),(0,a._)("button",{class:"btn btn-primary",type:"button",onClick:s=>M.addToCart(e,t.num=1),disabled:D.isLoading===e.id},[D.isLoading===e.id?((0,a.wg)(),(0,a.iD)("div",P,Z)):((0,a.wg)(),(0,a.iD)("span",T,"加入購物車"))],8,C)])])])])))),128))])]),(0,a._)("div",L,[(0,a.Wm)(H,{pages:D.pagination,onGetProducts:M.getProducts},null,8,["pages","onGetProducts"])])])])],64)}var N=s(4902),H=s(9280),Y={data(){return{allProducts:[],products:[],pagination:{},isLoading:"",productsType:[]}},components:{pagination:H.Z},methods:{getAllProducts(){N.Z.emit("page-loading",!0),this.$http.get("https://vue3-course-api.hexschool.io/v2/api/otispath/products/all").then((t=>{this.allProducts=t.data.products;const e=[];this.allProducts.forEach((t=>{-1===e.indexOf(t.category)&&e.push(t.category)})),this.productsType=e,N.Z.emit("page-loading",!1)})).catch((t=>{alert(t),N.Z.emit("page-loading",!1)}))},getProducts(t=1){this.$http.get(`https://vue3-course-api.hexschool.io/v2/api/otispath/products/?page=${t}`).then((t=>{this.products=t.data.products,this.pagination=t.data.pagination,window.scroll(0,0)})).catch((t=>{alert(t)}))},getProductsType(t){this.$http.get(`https://vue3-course-api.hexschool.io/v2/api/otispath/products/?category=${t}`).then((t=>{this.products=t.data.products,this.pagination=t.data.pagination,window.scroll(0,0)})).catch((t=>{alert(t)}))},addNum(t){const e=this.$refs[`item${t.id}`];e[0].value++},minusNum(t){const e=this.$refs[`item${t.id}`];e[0].value--,e[0].value<1&&(e[0].value=1)},addToCart(t,e=1){const s=this.$refs[`item${t.id}`],a={product_id:t.id,qty:Number(s[0].value)};this.isLoading=t.id,this.$http.post("https://vue3-course-api.hexschool.io/v2/api/otispath/cart",{data:a}).then((t=>{this.$httpMessageState(t,"加入購物車"),s[0].value=1,N.Z.emit("get-cart"),this.isLoading=""})).catch((t=>{alert(t),this.isLoading=""}))}},mounted(){window.scroll(0,0),this.getAllProducts(),this.getProducts()}},j=s(3744);const z=(0,j.Z)(Y,[["render",M]]);var K=z}}]);
//# sourceMappingURL=180.a3058956.js.map