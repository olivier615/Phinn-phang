"use strict";(self["webpackChunkweek8"]=self["webpackChunkweek8"]||[]).push([[490],{490:function(t,l,e){e.r(l),e.d(l,{default:function(){return X}});var o=e(6252),a=e(9963);const i=(0,o._)("h2",null,"單一產品頁面",-1),s={class:"modal-dialog modal-xl"},r={class:"modal-content border-0"},c={class:"modal-header bg-dark text-white"},d={id:"productModalLabel",class:"modal-title"},n={key:0},u={key:1},p={class:"modal-body"},m={class:"row"},h={class:"col-sm-4"},b={class:"mb-3"},g=(0,o._)("label",{for:"imageUrl",class:"form-label"},"主要圖片",-1),_=["src"],f=(0,o._)("h3",{class:"mb-3"},"多圖新增",-1),v={key:0},y={class:"mb-3"},w=(0,o._)("label",{for:"imageUrl",class:"form-label"},"圖片網址",-1),U=["onUpdate:modelValue"],k=["src"],x={key:0},L={key:1},V={class:"col-sm-8"},C={class:"mb-3"},$=(0,o._)("label",{for:"title",class:"form-label"},"標題",-1),D={class:"row"},E={class:"mb-3 col-md-6"},P=(0,o._)("label",{for:"category",class:"form-label"},"分類",-1),N={class:"mb-3 col-md-6"},q=(0,o._)("label",{for:"price",class:"form-label"},"單位",-1),A={class:"row"},H={class:"mb-3 col-md-6"},I=(0,o._)("label",{for:"origin_price",class:"form-label"},"原價",-1),Y={class:"mb-3 col-md-6"},z=(0,o._)("label",{for:"price",class:"form-label"},"售價",-1),F=(0,o._)("hr",null,null,-1),K={class:"mb-3"},M=(0,o._)("label",{for:"description",class:"form-label"},"產品描述",-1),S={class:"mb-3"},W=(0,o._)("label",{for:"content",class:"form-label"},"說明內容",-1),Z={class:"mb-3"},j={class:"form-check"},B=(0,o._)("label",{class:"form-check-label",for:"is_enabled"},"是否啟用",-1),G={class:"modal-footer"};function J(t,l,e,J,O,Q){const R=(0,o.up)("Loading");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(R,{active:O.isLoading,"z-index":1060},null,8,["active"]),i,(0,o._)("div",s,[(0,o._)("div",r,[(0,o._)("div",c,[(0,o._)("h5",d,[O.isNew?((0,o.wg)(),(0,o.iD)("span",n,"新增產品")):((0,o.wg)(),(0,o.iD)("span",u,"編輯產品"))]),(0,o._)("button",{type:"button",class:"btn-close bg-light","aria-label":"Close",onClick:l[0]||(l[0]=(...t)=>Q.cancelEdit&&Q.cancelEdit(...t))})]),(0,o._)("div",p,[(0,o._)("div",m,[(0,o._)("div",h,[(0,o._)("div",b,[g,(0,o._)("input",{type:"file",class:"form-control mb-3",id:"file",onChange:l[1]||(l[1]=(...t)=>Q.upload&&Q.upload(...t)),placeholder:"選擇圖片上傳"},null,32),(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":l[2]||(l[2]=t=>O.product.imageUrl=t),type:"text",class:"form-control mb-2",placeholder:"請輸入圖片連結"},null,512),[[a.nr,O.product.imageUrl]]),(0,o._)("img",{class:"img-fluid",src:O.product.imageUrl},null,8,_)]),f,Array.isArray(O.product.imagesUrl)?((0,o.wg)(),(0,o.iD)("div",v,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(O.product.imagesUrl,((t,l)=>((0,o.wg)(),(0,o.iD)("div",{class:"mb-1",key:l},[(0,o._)("div",y,[w,(0,o.wy)((0,o._)("input",{type:"text",class:"form-control",placeholder:"請輸入圖片連結","onUpdate:modelValue":t=>O.product.imagesUrl[l]=t},null,8,U),[[a.nr,O.product.imagesUrl[l]]])]),(0,o._)("img",{class:"img-fluid",src:t},null,8,k)])))),128)),!O.product.imagesUrl.length||O.product.imagesUrl[O.product.imagesUrl.length-1]?((0,o.wg)(),(0,o.iD)("div",x,[(0,o._)("button",{class:"btn btn-outline-primary btn-sm d-block w-100",onClick:l[3]||(l[3]=t=>O.product.imagesUrl.push(""))}," 新增圖片 ")])):(0,o.kq)("",!0),(0,o._)("div",null,[(0,o._)("button",{class:"btn btn-outline-danger btn-sm d-block w-100",onClick:l[4]||(l[4]=t=>O.product.imagesUrl.pop())}," 刪除圖片 ")])])):((0,o.wg)(),(0,o.iD)("div",L,[(0,o._)("button",{class:"btn btn-outline-primary btn-sm d-block w-100",onClick:l[5]||(l[5]=t=>Q.createImagesUrl())}," 新增圖片 ")]))]),(0,o._)("div",V,[(0,o._)("div",C,[$,(0,o.wy)((0,o._)("input",{id:"title",type:"text",class:"form-control",placeholder:"請輸入標題","onUpdate:modelValue":l[6]||(l[6]=t=>O.product.title=t)},null,512),[[a.nr,O.product.title]])]),(0,o._)("div",D,[(0,o._)("div",E,[P,(0,o.wy)((0,o._)("input",{id:"category",type:"text",class:"form-control",placeholder:"請輸入分類","onUpdate:modelValue":l[7]||(l[7]=t=>O.product.category=t)},null,512),[[a.nr,O.product.category]])]),(0,o._)("div",N,[q,(0,o.wy)((0,o._)("input",{id:"unit",type:"text",class:"form-control",placeholder:"請輸入單位","onUpdate:modelValue":l[8]||(l[8]=t=>O.product.unit=t)},null,512),[[a.nr,O.product.unit]])])]),(0,o._)("div",A,[(0,o._)("div",H,[I,(0,o.wy)((0,o._)("input",{id:"origin_price",type:"number",min:"0",class:"form-control",placeholder:"請輸入原價","onUpdate:modelValue":l[9]||(l[9]=t=>O.product.origin_price=t)},null,512),[[a.nr,O.product.origin_price,void 0,{number:!0}]])]),(0,o._)("div",Y,[z,(0,o.wy)((0,o._)("input",{id:"price",type:"number",min:"0",class:"form-control",placeholder:"請輸入售價","onUpdate:modelValue":l[10]||(l[10]=t=>O.product.price=t)},null,512),[[a.nr,O.product.price,void 0,{number:!0}]])])]),F,(0,o._)("div",K,[M,(0,o.wy)((0,o._)("textarea",{id:"description",type:"text",class:"form-control",placeholder:"請輸入產品描述","onUpdate:modelValue":l[11]||(l[11]=t=>O.product.description=t)},"\r\n                  ",512),[[a.nr,O.product.description]])]),(0,o._)("div",S,[W,(0,o.wy)((0,o._)("textarea",{id:"description",type:"text",class:"form-control",placeholder:"請輸入說明內容","onUpdate:modelValue":l[12]||(l[12]=t=>O.product.content=t)},"\r\n                  ",512),[[a.nr,O.product.content]])]),(0,o._)("div",Z,[(0,o._)("div",j,[(0,o.wy)((0,o._)("input",{id:"is_enabled",class:"form-check-input",type:"checkbox","true-value":1,"false-value":0,"onUpdate:modelValue":l[13]||(l[13]=t=>O.product.is_enabled=t)},null,512),[[a.e8,O.product.is_enabled]]),B])])])])]),(0,o._)("div",G,[(0,o._)("button",{type:"button",class:"btn btn-outline-secondary",onClick:l[14]||(l[14]=(...t)=>Q.cancelEdit&&Q.cancelEdit(...t))}," 取消 "),(0,o._)("button",{type:"button",class:"btn btn-primary",onClick:l[15]||(l[15]=(...t)=>Q.updateProduct&&Q.updateProduct(...t))}," 確認 ")])])])],64)}let O=null;var Q={data(){return{isLoading:!1,product:{imagesUrl:[]},isNew:!1}},methods:{getProduct(){this.isLoading=!0;const{id:t}=this.$route.params;void 0===t?(this.isNew=!0,this.isLoading=!1):this.$http.get(`https://vue3-course-api.hexschool.io/v2/api/otispath/product/${t}`).then((t=>{this.product=t.data.product,this.isLoading=!1})).catch(this.isLoading=!1)},upload(){this.isLoading=!0;const t=O.files[0],l=new FormData;l.append("file-to-upload",t),this.$http.post("https://vue3-course-api.hexschool.io/v2/api/otispath/admin/upload/",l).then((t=>{this.product.imageUrl=t.data.imageUrl,this.isLoading=!1})).catch(this.isLoading=!1)},createImagesUrl(){this.product.imagesUrl=[],this.product.imagesUrl.push("")},updateProduct(){this.isLoading=!0,this.isNew?this.$http.post("https://vue3-course-api.hexschool.io/v2/api/otispath/admin/product",{data:this.product}).then((t=>{alert(t.data.message),this.isLoading=!1,this.$router.push("/admin/products")})).catch((t=>{this.isLoading=!1,alert(t)})):this.$http.put(`https://vue3-course-api.hexschool.io/v2/api/otispath/admin/product/${this.product.id}`,{data:this.product}).then((t=>{alert(t.data.message),this.isLoading=!1,this.$router.push("/admin/products")})).catch((t=>{this.isLoading=!1,alert(t)}))},cancelEdit(){this.product={imagesUrl:[]},this.$router.push("/admin/products")}},mounted(){this.getProduct(),O=document.querySelector("#file")}},R=e(3744);const T=(0,R.Z)(Q,[["render",J]]);var X=T}}]);
//# sourceMappingURL=490.4390ae51.js.map