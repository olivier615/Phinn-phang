{"version":3,"file":"js/180.a3058956.js","mappings":"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","sources":["webpack://week8/./src/components/PageView.vue","webpack://week8/./src/components/PageView.vue?6380","webpack://week8/./src/views/ProductsView.vue","webpack://week8/./src/views/ProductsView.vue?91db"],"sourcesContent":["<template>\r\n  <nav aria-label=\"Page navigation example\">\r\n    <ul class=\"pagination\">\r\n      <li class=\"page-item\" :class=\"{ disabled: !pages.has_pre }\">\r\n        <a\r\n          class=\"page-link\"\r\n          href=\"#\"\r\n          @click.prevent=\"$emit('getProducts', pages.current_page - 1)\"\r\n          >上一頁</a\r\n        >\r\n      </li>\r\n      <li\r\n        class=\"page-item\"\r\n        v-for=\"page in pages.total_pages\"\r\n        :key=\"'page' + page\"\r\n        :class=\"{active: page === pages.current_page}\"\r\n      >\r\n        <a class=\"page-link\" href=\"#\" @click.prevent=\"$emit('getProducts', page)\">\r\n          {{page}}\r\n        </a>\r\n      </li>\r\n      <li class=\"page-item\" :class=\"{ disabled: !pages.has_next }\">\r\n        <a\r\n          class=\"page-link\"\r\n          href=\"#\"\r\n          @click.prevent=\"$emit('getProducts', pages.current_page + 1)\"\r\n          >下一頁</a\r\n        >\r\n      </li>\r\n    </ul>\r\n  </nav>\r\n</template>\r\n<script>\r\nexport default {\r\n  props: ['pages']\r\n}\r\n</script>\r\n","import { render } from \"./PageView.vue?vue&type=template&id=5d03949f\"\nimport script from \"./PageView.vue?vue&type=script&lang=js\"\nexport * from \"./PageView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\User\\\\Desktop\\\\vue-week8\\\\week8\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n    <div class=\"img-banner-ProductsView mt-80 img-banner mb-6\" />\r\n<div class=\"container\">\r\n  <div class=\"row flex-column flex-md-row\">\r\n    <ul class=\"list-style-none col-12 col-md-3 d-flex flex-column align-items-center text-secondary\">\r\n      <li class=\"mb-2\">\r\n        <a href=\"#\" @click.prevent=\"getProducts\">\r\n        全部商品\r\n        </a>\r\n      </li>\r\n      <li class=\"mb-2\" v-for=\"type in productsType\" :key=\"type\">\r\n        <a href=\"#\" @click.prevent=\"getProductsType(type)\">{{ type }}</a>\r\n      </li>\r\n    </ul>\r\n    <div class=\"card-group col-12 col-md-9\">\r\n      <div class=\"row row-cols-lg-3 row-cols-sm-2 row-cols-1\">\r\n        <div class=\"col mb-3 py-2\" v-for=\"product in products\" :key=\"product.id\">\r\n          <div class=\"card border-0\">\r\n            <router-link :to=\"`/product/${product.id}`\">\r\n              <img :src=\"product.imageUrl\" class=\"card-img-top\" :alt=\"product.title\">\r\n              <div class=\"card-body py-2 px-0\">\r\n                <h5 class=\"card-title mb-0 text-secondary fs-6\">{{ product.title }}</h5>\r\n              </div>\r\n            </router-link>\r\n            <div class=\"card-footer p-0 border-0\">\r\n              <router-link class=\"btn btn-outline-secondary\"\r\n              :to=\"`/product/${product.id}`\" style=\"width:100%\"\r\n              >查看更多</router-link>\r\n              <div class=\"d-flex justify-content-between mt-1\">\r\n                <div class=\"d-flex border border-secondary align-items-center\">\r\n                  <span class=\"bi bi-dash fs-5 px-1\"\r\n                  @click=\"minusNum(product)\"></span>\r\n                  <input type=\"number\" class=\"form-control p-0 text-center border-0 bg-light\"\r\n                  value=\"1\" :ref=\"`item${product.id}`\"\r\n                  min=\"1\" style=\"max-width:2rem; height:100%\">\r\n                  <span class=\"bi bi-plus fs-5 px-1\"\r\n                  @click=\"addNum(product)\"></span>\r\n                </div>\r\n                <button class=\"btn btn-primary\" type=\"button\"\r\n                @click=\"addToCart(product, num = 1)\"\r\n                :disabled=\"isLoading === product.id\">\r\n                <div v-if=\"isLoading === product.id\">\r\n                  <span class=\"spinner-border spinner-border-sm me-2\" role=\"status\"></span>\r\n                  <span>請稍後...</span>\r\n                </div>\r\n                <span v-else>加入購物車</span>\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"d-flex justify-content-md-end justify-content-center my-4\">\r\n      <pagination :pages=\"pagination\" @get-products=\"getProducts\"/>\r\n    </div>\r\n  </div>\r\n</div>\r\n</template>\r\n<script>\r\nimport emitter from '@/libs/emitter.js'\r\nimport pagination from '@/components/PageView.vue'\r\nexport default {\r\n  data () {\r\n    return {\r\n      allProducts: [],\r\n      products: [],\r\n      pagination: {},\r\n      isLoading: '',\r\n      productsType: []\r\n    }\r\n  },\r\n  components: {\r\n    pagination\r\n  },\r\n  methods: {\r\n    getAllProducts () {\r\n      emitter.emit('page-loading', true)\r\n      this.$http.get(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/products/all`)\r\n        .then(res => {\r\n          this.allProducts = res.data.products\r\n          const ary = []\r\n          this.allProducts.forEach(item => {\r\n            if (ary.indexOf(item.category) === -1) {\r\n              ary.push(item.category)\r\n            }\r\n          })\r\n          this.productsType = ary\r\n          emitter.emit('page-loading', false)\r\n        })\r\n        .catch(err => {\r\n          alert(err)\r\n          emitter.emit('page-loading', false)\r\n        })\r\n    },\r\n    getProducts (page = 1) {\r\n      this.$http.get(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/products/?page=${page}`)\r\n        .then(res => {\r\n          this.products = res.data.products\r\n          this.pagination = res.data.pagination\r\n          window.scroll(0, 0)\r\n        })\r\n        .catch(err => {\r\n          alert(err)\r\n        })\r\n    },\r\n    getProductsType (category) {\r\n      this.$http.get(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/products/?category=${category}`)\r\n        .then(res => {\r\n          this.products = res.data.products\r\n          this.pagination = res.data.pagination\r\n          window.scroll(0, 0)\r\n        })\r\n        .catch(err => {\r\n          alert(err)\r\n        })\r\n    },\r\n    addNum (product) {\r\n      const numInput = this.$refs[`item${product.id}`]\r\n      numInput[0].value++\r\n    },\r\n    minusNum (product) {\r\n      const numInput = this.$refs[`item${product.id}`]\r\n      numInput[0].value--\r\n      if (numInput[0].value < 1) {\r\n        numInput[0].value = 1\r\n      }\r\n    },\r\n    addToCart (product, num = 1) {\r\n      const numInput = this.$refs[`item${product.id}`]\r\n      const data = {\r\n        product_id: product.id,\r\n        qty: Number(numInput[0].value)\r\n      }\r\n      this.isLoading = product.id\r\n      this.$http.post(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart`, { data })\r\n        .then(res => {\r\n          this.$httpMessageState(res, '加入購物車')\r\n          numInput[0].value = 1\r\n          emitter.emit('get-cart')\r\n          this.isLoading = ''\r\n        })\r\n        .catch(err => {\r\n          alert(err)\r\n          this.isLoading = ''\r\n        })\r\n    }\r\n  },\r\n  mounted () {\r\n    window.scroll(0, 0)\r\n    this.getAllProducts()\r\n    this.getProducts()\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./ProductsView.vue?vue&type=template&id=44a92e41\"\nimport script from \"./ProductsView.vue?vue&type=script&lang=js\"\nexport * from \"./ProductsView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\User\\\\Desktop\\\\vue-week8\\\\week8\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementBlock","_createElementVNode","disabled","$props","has_pre","href","onClick","_ctx","current_page","_Fragment","_renderList","total_pages","page","active","key","_hoisted_3","has_next","props","__exports__","render","role","_hoisted_21","_hoisted_22","_hoisted_1","$options","$data","type","_hoisted_6","product","id","_createVNode","_component_router_link","to","src","imageUrl","alt","title","_toDisplayString","style","value","ref","min","_hoisted_20","_hoisted_23","_hoisted_24","_component_pagination","pages","onGetProducts","data","allProducts","products","pagination","isLoading","productsType","components","methods","getAllProducts","emitter","this","$http","get","then","res","ary","forEach","item","indexOf","category","push","catch","err","alert","getProducts","window","scroll","getProductsType","addNum","numInput","$refs","minusNum","addToCart","num","product_id","qty","Number","post","$httpMessageState","mounted"],"sourceRoot":""}